<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="redturtle.ads">

  <body>
    <metal:content-core fill-slot="content-core">
      <metal:content-core define-macro="content-core"
                          tal:define="price context/price|nothing;
                                      text context/text|nothing;
                                      external_url context/external_link|nothing;
                                      principal_image view/getPrincipalImage;
                                      additional_images view/getAdditionalImages;
                                      category view/getCategory;
                                      effective context/Date;
                                      author_infos view/getAuthorInfos">

      <div tal:condition="author_infos" class="author-infos">

          <span tal:omit-tag="" i18n:translate="creator_label">by</span>
          <figure>
            <a href="http://localhost:8080/comnet/author/neko"><img src="http://localhost:8080/comnet/portal_memberdata/portraits/neko" alt="Creator portrait picture" class="portraitPhoto">
            </a>
          </figure>
          <a tal:define="creator author_infos/creator" class="adv-author" href="${context/portal_url}/${creator/id}/author_info" title="${creator/fullname}">${creator/fullname}</a>

        <span class="adv-number" tal:define="advertisements author_infos/advertisements">(
          ${advertisements}
          <tal:single condition="python:advertisements == 1" i18n:translate="advertisement_label">advertisement created</tal:single>
          <tal:single condition="python:advertisements != 1" i18n:translate="advertisements_label">advertisements created</tal:single>
        )</span>
      </div>

      <div class="adv-row">
        <div class="advertisement-details"
             tal:condition="python:text or principal_image">
          <!-- <figure class="image-right" tal:condition="principal_image" tal:content="structure principal_image"></figure> -->
          <div tal:condition="text" tal:replace="structure text/output"></div>
        </div>
        <div class="advertisement-infos">
            <h5 i18n:translate="infos_label">Infos</h5>
            <ul>
              <li tal:condition="price" class="adv-info-price">
                <h6 i18n:translate="price_label">Price</h6>
                <p>${price}</p>
              </li>
              <li tal:condition="category" class="adv-info-category">
                <h6 i18n:translate="category_label">Category</h6>
                <p><a href="${category/url}" title="${category/title}">${category/title}</a></p>
              </li>
              <li tal:condition="effective" class="adv-info-date">
                <h6 i18n:translate="published_label">Published</h6>
                <p tal:content="python:view.getFormattedDate(effective)"></p>
              </li>
              <li tal:condition="external_url" class="adv-info-url">
                <h6 i18n:translate="external_link_label">External link</h6>
                <p><a href="${external_url}" title="Go to external link">${external_url}</a></p>
              </li>
            </ul>
        </div>
      </div>
      <div class="additional-images" tal:condition="additional_images">
        <tal:image repeat="image_tag additional_images">
          <figure tal:content="structure image_tag"></figure>
        </tal:image>
      </div>
      <div class="back-adv-board">
        <a href="#">Torna alla bacheca degli annunci</a>
      </div>
      </metal:content-core>
    </metal:content-core>
  </body>
</html>
